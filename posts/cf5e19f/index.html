<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css">
  <script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"kaijiadage.com","root":"/","scheme":"Gemini","version":"7.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":true,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="I&#39;m going to record the errors when I&#39;m doing my Data Mining coursework here">
<meta property="og:type" content="article">
<meta property="og:title" content="Data mining coursework">
<meta property="og:url" content="https://kaijiadage.com/posts/cf5e19f/index.html">
<meta property="og:site_name" content="DEC-10 Lab">
<meta property="og:description" content="I&#39;m going to record the errors when I&#39;m doing my Data Mining coursework here">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://kaijiadage.com/images/stopwords.png">
<meta property="article:published_time" content="2020-03-06T15:57:12.000Z">
<meta property="article:modified_time" content="2020-03-19T22:09:06.352Z">
<meta property="article:author" content="Jerry Jia">
<meta property="article:tag" content="Data mining">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://kaijiadage.com/images/stopwords.png">

<link rel="canonical" href="https://kaijiadage.com/posts/cf5e19f/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>Data mining coursework | DEC-10 Lab</title>
  
    <script>
      function sendPageView() {
        if (CONFIG.hostname !== location.hostname) return;
        var uid = localStorage.getItem('uid') || (Math.random() + '.' + Math.random());
        localStorage.setItem('uid', uid);
        navigator.sendBeacon('https://www.google-analytics.com/collect', new URLSearchParams({
          v  : 1,
          tid: 'UA-158683607-1',
          cid: uid,
          t  : 'pageview',
          dp : encodeURIComponent(location.pathname)
        }));
      }
      document.addEventListener('pjax:complete', sendPageView);
      sendPageView();
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">DEC-10 Lab</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-right"></div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="https://kaijiadage.com/posts/cf5e19f/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Jerry Jia">
      <meta itemprop="description" content="The Force will be with you. Always.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DEC-10 Lab">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Data mining coursework
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-06 15:57:12" itemprop="dateCreated datePublished" datetime="2020-03-06T15:57:12+00:00">2020-03-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-19 22:09:06" itemprop="dateModified" datetime="2020-03-19T22:09:06+00:00">2020-03-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Data-mining/" itemprop="url" rel="index">
                    <span itemprop="name">Data mining</span>
                  </a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/posts/cf5e19f/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/cf5e19f/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              <span>6.3k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              <span>6 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <blockquote>
<p>I&#39;m going to record the errors when I&#39;m doing my Data Mining coursework here</p>
</blockquote>
<a id="more"></a>
<ol>
<li><p>reindex() missing 1 required positional argument: ‘self’</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tweet_df = pd.DataFrame.reindex(index=range(df.shape[<span class="number">0</span>]))</span><br></pre></td></tr></table></figure>
<p>This code could help you create a DataFrame filling with ‘NaN’.<br>The new DataFrame tweet_df has one column and the same number of rows as DataFrame df.<br>The previous code is wrong and it should change to the following code:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tweet_df = pd.DataFrame().reindex(index=range(df.shape[<span class="number">0</span>]))</span><br></pre></td></tr></table></figure></li>
<li><p>in pandas, null means numpy.nan</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> pd.isnull(df):</span><br><span class="line">  print(<span class="string">'DataFrame df is null'</span>)</span><br></pre></td></tr></table></figure>
<p>if you want to remove the null character string, you cannot merely use pd.isnull(), you should use:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">drop_rows</span><span class="params">(tweets)</span>:</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(len(tweets)):</span><br><span class="line">    <span class="keyword">if</span> tweets[i] == <span class="string">''</span> <span class="keyword">or</span> pd.isnull(tweets[i]):</span><br><span class="line">      tweets.drop([i])</span><br><span class="line">  <span class="keyword">return</span> tweets</span><br></pre></td></tr></table></figure>
<p>This code is not really good, the following code is an improvement：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">drop_rows</span><span class="params">(tweets)</span>:</span></span><br><span class="line">  drop_index = []</span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(len(tweets)):</span><br><span class="line">    <span class="keyword">if</span> tweets[i] == <span class="string">''</span> <span class="keyword">or</span> pd.isnull(tweets[i]):</span><br><span class="line">      drop_index.append(i)</span><br><span class="line"></span><br><span class="line">  tweets.drop(drop_index, inplace = <span class="literal">True</span>)</span><br><span class="line">  <span class="comment"># reset_index这一步很重要，使删除了若干项的不连贯的index重新建立连续的index</span></span><br><span class="line">  tweets.reset_index(drop=<span class="literal">True</span>, inplace=<span class="literal">True</span>)</span><br><span class="line">  <span class="keyword">return</span> tweets</span><br></pre></td></tr></table></figure></li>
<li><p>in some functions in pandas, you should be careful of inplace operator, it may bring you some misunderstanding sometimes.</p>
</li>
<li><p>Stemming(词干提取)<br>Stem (root) is the part of the word to which you add inflectional (changing/deriving) affixes such as (-ed,-ize, -s,-de,mis). So stemming a word or sentence may result in words that are not actual words. Stems are created by removing the suffixes or prefixes used with a word.</p>
<blockquote>
<p><code>Stop words</code>: <code>Stop Words</code> are words which do not contain important significance to be used in Search Queries. Usually, these words are filtered out from search queries because they return a vast amount of unnecessary information. Each programming language will give its own list of stop words to use. Mostly they are words that are commonly used in the English language such as ‘as, the, be, are’ etc.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">import</span> nltk</span><br><span class="line"> nltk.download(<span class="string">'stopwords'</span>)</span><br><span class="line"></span><br><span class="line"> <span class="keyword">from</span> wordcloud <span class="keyword">import</span> STOPWORDS</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">stop_words</span><span class="params">()</span>:</span></span><br><span class="line">   <span class="keyword">from</span> nltk.corpus <span class="keyword">import</span> stopwords</span><br><span class="line">   <span class="comment"># 179 words</span></span><br><span class="line">   stop_words_list = stopwords.words(<span class="string">'english'</span>)</span><br><span class="line">   <span class="keyword">return</span> stop_words_list</span><br><span class="line"></span><br><span class="line"><span class="comment"># 179 words</span></span><br><span class="line">nltk_list = stop_words()</span><br><span class="line"><span class="comment"># 190 words</span></span><br><span class="line">wordcloud_list = list(STOPWORDS)</span><br></pre></td></tr></table></figure>
<p><img src="/images/stopwords.png" alt="stopwords"><br><a href="https://www.nltk.org/book/ch02.html" target="_blank" rel="noopener">here</a></p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基于Porter词干提取算法</span></span><br><span class="line"><span class="keyword">from</span> nltk.stem.porter <span class="keyword">import</span> PorterStemmer</span><br><span class="line">porter_stemmer = PorterStemmer()</span><br><span class="line">print(porter_stemmer.stem(<span class="string">'maximum'</span>))</span><br><span class="line">print(porter_stemmer.stem(<span class="string">'prints'</span>))</span><br><span class="line">print(porter_stemmer.stem(<span class="string">'printed'</span>))</span><br><span class="line">print(porter_stemmer.stem(<span class="string">'printing'</span>))</span><br><span class="line">print(porter_stemmer.stem(<span class="string">'this'</span>))</span><br><span class="line">print(porter_stemmer.stem(<span class="string">'am'</span>))</span><br><span class="line">print(porter_stemmer.stem(<span class="string">'is'</span>))</span><br><span class="line">print(porter_stemmer.stem(<span class="string">'are'</span>))</span><br><span class="line">print(porter_stemmer.stem(<span class="string">'car\'s'</span>))</span><br><span class="line">print(porter_stemmer.stem(<span class="string">'cars\''</span>))</span><br><span class="line">print(porter_stemmer.stem(<span class="string">'leaves'</span>))</span><br><span class="line">print(<span class="string">'-------------------------------------------'</span>)</span><br><span class="line"><span class="comment"># 基于Lancaster 词干提取算法</span></span><br><span class="line"><span class="keyword">from</span> nltk.stem.lancaster <span class="keyword">import</span> LancasterStemmer</span><br><span class="line">lancaster_stemmer = LancasterStemmer()</span><br><span class="line">print(lancaster_stemmer.stem(<span class="string">'maximum'</span>))</span><br><span class="line">print(lancaster_stemmer.stem(<span class="string">'prints'</span>))</span><br><span class="line">print(lancaster_stemmer.stem(<span class="string">'printed'</span>))</span><br><span class="line">print(lancaster_stemmer.stem(<span class="string">'printing'</span>))</span><br><span class="line">print(lancaster_stemmer.stem(<span class="string">'this'</span>))</span><br><span class="line">print(lancaster_stemmer.stem(<span class="string">'am'</span>))</span><br><span class="line">print(lancaster_stemmer.stem(<span class="string">'is'</span>))</span><br><span class="line">print(lancaster_stemmer.stem(<span class="string">'are'</span>))</span><br><span class="line">print(lancaster_stemmer.stem(<span class="string">'car\'s'</span>))</span><br><span class="line">print(lancaster_stemmer.stem(<span class="string">'cars\''</span>))</span><br><span class="line">print(lancaster_stemmer.stem(<span class="string">'leaves'</span>))</span><br><span class="line">print(<span class="string">'-------------------------------------------'</span>)</span><br><span class="line"><span class="comment"># 基于Snowball 词干提取算法</span></span><br><span class="line"><span class="keyword">from</span> nltk.stem <span class="keyword">import</span> SnowballStemmer</span><br><span class="line">snowball_stemmer = SnowballStemmer(<span class="string">'english'</span>)</span><br><span class="line">print(snowball_stemmer.stem(<span class="string">'maximum'</span>))</span><br><span class="line">print(snowball_stemmer.stem(<span class="string">'prints'</span>))</span><br><span class="line">print(snowball_stemmer.stem(<span class="string">'printed'</span>))</span><br><span class="line">print(snowball_stemmer.stem(<span class="string">'printing'</span>))</span><br><span class="line">print(snowball_stemmer.stem(<span class="string">'this'</span>))</span><br><span class="line">print(snowball_stemmer.stem(<span class="string">'am'</span>))</span><br><span class="line">print(snowball_stemmer.stem(<span class="string">'is'</span>))</span><br><span class="line">print(snowball_stemmer.stem(<span class="string">'are'</span>))</span><br><span class="line">print(snowball_stemmer.stem(<span class="string">'car\'s'</span>))</span><br><span class="line">print(snowball_stemmer.stem(<span class="string">'cars\''</span>))</span><br><span class="line">print(snowball_stemmer.stem(<span class="string">'leaves'</span>))</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>Lemmatisation(词性还原)<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> nltk</span><br><span class="line">nltk.download(<span class="string">'wordnet'</span>)</span><br><span class="line"><span class="keyword">from</span> nltk <span class="keyword">import</span> WordNetLemmatizer</span><br><span class="line">lemmatizer = WordNetLemmatizer()</span><br><span class="line">print(lemmatizer.lemmatize(<span class="string">'maximum'</span>))</span><br><span class="line">print(lemmatizer.lemmatize(<span class="string">'prints'</span>))</span><br><span class="line">print(lemmatizer.lemmatize(<span class="string">'printed'</span>))</span><br><span class="line">print(lemmatizer.lemmatize(<span class="string">'printing'</span>))</span><br><span class="line">print(lemmatizer.lemmatize(<span class="string">'this'</span>))</span><br><span class="line">print(lemmatizer.lemmatize(<span class="string">'am'</span>))</span><br><span class="line">print(lemmatizer.lemmatize(<span class="string">'is'</span>))</span><br><span class="line">print(lemmatizer.lemmatize(<span class="string">'are'</span>))</span><br><span class="line">print(lemmatizer.lemmatize(<span class="string">'car\'s'</span>))</span><br><span class="line">print(lemmatizer.lemmatize(<span class="string">'cars\''</span>))</span><br><span class="line">print(lemmatizer.lemmatize(<span class="string">'leaves'</span>))</span><br></pre></td></tr></table></figure></li>
<li>str.replace()的使用误区<br>此处使用的是pandas.Series.str.replace方法<blockquote>
<p>小tip：在路径中去除掉一些特殊意义的字符进行转义，除了可以使用’\‘之外，我们也可以使用r加在所要处理的字符外面，这样就不用专门的去处理引号之中的特殊字符了</p>
</blockquote>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">word_list = [<span class="string">'user'</span>, <span class="string">'url'</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(word_list)):</span><br><span class="line">  df[<span class="string">'tweet'</span>] = df[<span class="string">'tweet'</span>].str.replace(word_list[i], <span class="string">""</span>)</span><br></pre></td></tr></table></figure>
<p>本意是想替换tweets中的所有user，url，只整体替换单词，最后发现只要tweets中出现了这个组合的词都被替换了，比如一个词，原本是username，本无意替换，这里却替换成了name。<br>最后采用lambda表达式，一行搞定：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">'tweet'</span>] = df[<span class="string">'tweet'</span>].apply(<span class="keyword">lambda</span> x: <span class="string">' '</span>.join([w <span class="keyword">for</span> w <span class="keyword">in</span> x.split() <span class="keyword">if</span> w <span class="keyword">not</span> <span class="keyword">in</span> word_list <span class="keyword">and</span> len(w)&gt;<span class="number">3</span>]))</span><br></pre></td></tr></table></figure>
<p>意思就是把每一条tweets进行遍历（x的作用），每条tweet都根据空格分隔为一个list然后遍历（w），满足条件的留下来（for前面的w），最后每一条tweet通过’ ‘（空格）再连接起来。</p>
<ol start="7">
<li>pandas.DataFrame.merge使用<br>Merge DataFrame or named Series objects with a database-style join.<br>以数据库风格的方式合并DataFrame或Series<br>比如两个csv文件都拥有相同的列名id，现在想根据id合并为一个csv文件（类似Excel的vlookup函数）<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">outfile = pd.merge(df1, df2, how=<span class="string">'inner'</span>, left_on=<span class="string">'id'</span>,right_on=<span class="string">'id'</span>)</span><br></pre></td></tr></table></figure>
表示将df1的id列和df2的id列以inner join的方式进行合并，<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> df1 <span class="keyword">inner</span> <span class="keyword">join</span> df2</span><br><span class="line"><span class="keyword">where</span> df1.id = df2.id</span><br></pre></td></tr></table></figure>
以上代码过于啰嗦，完全可以用以下代替<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">outfile = pd.merge(df1, df2, on=<span class="string">'id'</span>)</span><br></pre></td></tr></table></figure></li>
<li>summary</li>
</ol>
<p>The method I used to create the training data and test data:</p>
<ul>
<li>get all the distinct words from different tweets(for example, get offensive words from all the offensive tweets), count and rank them.</li>
<li>In this case, I get 7 different sets of words(offensive, not offensive, targeted, nottargeted and so on).</li>
<li>Then, I choose the words that occur more than 10 times(we can modify this threshold), so I get 7 new sets of words.</li>
<li>After that, I use these 7 new sets of words to filter the original tweets respectively(for example, use new offensive words set to filter the offensive tweets, only keep words in the new offensive words set).</li>
<li>finally, I get 7 different types of tweets(offensive tweets, notoffensive tweets and so on) and combine them to 3 new tweets sets(subtask_a, subtask_b, subtask_c)</li>
</ul>
<p>Other data cleaning method I used (maybe they can be mentioned in the presentation)</p>
<ul>
<li>Only keep the characters and hash tags</li>
<li>remove the extra blanks</li>
<li>lowercase all the words</li>
<li>remove the stop words and some words that don’t make sense.(stop words are from nltk corpus and wordcloud stopwords list)</li>
<li>replace all the null subtask to NaN</li>
<li>keep the words longer than 3 words</li>
<li>word cloud presentation</li>
</ul>
<p>lemmatizer</p>
<ul>
<li>use lemmatizer for the training and test data</li>
</ul>
<p>stem</p>
<ul>
<li><p>use SnowballStemmer for the training and test data</p>
</li>
<li><p>words_count</p>
</li>
</ul>
<p>All the words(except the stop words and some words that don’t make sense)in the tweets and their counts</p>
<p>Reference:</p>
<ol>
<li><a href="https://pandas.pydata.org/pandas-docs/stable/reference/index.html" target="_blank" rel="noopener">Pandas API reference</a></li>
</ol>

    </div>

    
    
    
      
  <div class="popular-posts-header">Related Posts</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\posts\c94f917b\" rel="bookmark">Data mining notes & weka notes</a></div>
    </li>
  </ul>

        <div class="reward-container">
  <div>Persist in original technology sharing, your support will encourage me to continue to create!</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    Donate
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.jpg" alt="Jerry Jia WeChat Pay">
        <p>WeChat Pay</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.jpg" alt="Jerry Jia Alipay">
        <p>Alipay</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:  </strong>Jerry Jia
  </li>
  <li class="post-copyright-link">
    <strong>Post link: </strong>
    <a href="https://kaijiadage.com/posts/cf5e19f/" title="Data mining coursework">https://kaijiadage.com/posts/cf5e19f/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/en" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/Data-mining/" rel="tag"><i class="fa fa-tag"></i> Data mining</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/70cdea1a/" rel="prev" title="Data Challenge slides">
      <i class="fa fa-chevron-left"></i> Data Challenge slides
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/d96bcfee/" rel="next" title="AI Terms">
      AI Terms <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jerry Jia"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Jerry Jia</p>
  <div class="site-description" itemprop="description">The Force will be with you. Always.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">26</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:sc19yj@leeds.ac.uk" title="E-Mail → mailto:sc19yj@leeds.ac.uk" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://gitlab.com/j646941811" title="Gitlab → https:&#x2F;&#x2F;gitlab.com&#x2F;j646941811" rel="noopener" target="_blank"><i class="fa fa-fw fa-gitlab"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.linkedin.com/in/yaokai-jia-767472194/" title="linkedin → https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;yaokai-jia-767472194&#x2F;" rel="noopener" target="_blank"><i class="fa fa-fw fa-linkedin"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.weibo.com/u/3877817196" title="Weibo → https:&#x2F;&#x2F;www.weibo.com&#x2F;u&#x2F;3877817196" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i></a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/en" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        
  <div class="beian"><a href="http://www.beian.miit.gov.cn/" rel="noopener" target="_blank">鄂ICP备16008371号-1 </a>
      <img src="/images/beian_icon.png" style="display: inline-block;">
  </div>

<div class="copyright">
  
  &copy; 2016 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-qq"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jerry Jia</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="Symbols count total">37k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">34 mins.</span>
</div><span id="sitetime"></span>
<script language=javascript>
function siteTime(){
window.setTimeout("siteTime()", 1000);
var seconds = 1000;
var minutes = seconds * 60;
var hours = minutes * 60;
var days = hours * 24;
var years = days * 365;
var today = new Date();
var todayYear = today.getFullYear();
var todayMonth = today.getMonth()+1;
var todayDate = today.getDate();
var todayHour = today.getHours();
var todayMinute = today.getMinutes();
var todaySecond = today.getSeconds();
var t1 = Date.UTC(2020,02,13,00,00,00); // Set a tiem to build the website
var t2 = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond);
var diff = t2-t1;
var diffYears = Math.floor(diff/years);
var diffDays = Math.floor((diff/days)-diffYears*365);
var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours);
var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes);
var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds);
document.getElementById("sitetime").innerHTML="I have been waiting for you "+diffYears+" year "+diffDays+" days "+diffHours+" hours "+diffMinutes+" mins "+diffSeconds+" seconds";
}
siteTime();
</script>


        
<div class="busuanzi-count">
  <script pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.1.0/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.getAttribute('pjax') !== null) {
      script.setAttribute('pjax', '');
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  
  <script pjax>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  
<script src="/js/local-search.js"></script>













    <div id="pjax">
  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'XrysTyPyi9sBnNPa4kKB1rWO-MdYXbMMI',
      appKey     : 'uaPwisM9cC8sVF91beMfIQjI',
      placeholder: "Please fill in your e-mail address above. You will be notified by e-mail when there is a reply. The e-mail address will not be published.",
      avatar     : 'wavatar',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'en' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

<script src="/js/comment-locate.js"></script>
<script src="//cdn.jsdelivr.net/npm/minigrid@3.1.1/dist/minigrid.min.js"></script>
    </div>
</body>
</html>
